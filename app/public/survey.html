<!doctype html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
      
    <title>Survey</title>
</head>

<body>
    <h1>Survey Questions</h1>
    <div class="text-center">
        <a href="/"><button class="btn btn-lg btn-primary"><span class="fa fa-list-alt"></span>Go Home</button></a>
    </div>
    <form>
        <div class="form-group">
            <label for="name"><h2>Name</h2></label>
            <input type="text" class="form-control" id="name" placeholder="Name">
        </div>
        <div class="form-group">
            <label for="image-url"><h2>Image URL</h2></label>
            <input type="text" class="form-control" id="image-url" placeholder="Image URL">
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 1</h2>
                <h3>You got the touch!</h3>
                <select class="custom-select mr-sm-2" id="q1">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 2</h2>
                <h3>You got the power!Yeah!</h3>
                <select class="custom-select mr-sm-2" id="q2">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 3</h2>
                <h3>After all is said and done. You've never walked, you've never run.</h3>
                <select class="custom-select mr-sm-2" id="q3">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 4</h2>
                <h3>You're a winner!</h3>
                <select class="custom-select mr-sm-2" id="q4">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 5</h2>
                <h3>You got the moves.</h3>
                <select class="custom-select mr-sm-2" id="q5">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 6</h2>
                <h3>You know the streets.</h3>
                <select class="custom-select mr-sm-2" id="q6">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 7</h2>
                <h3>Break the rules, take the heat. You're nobody's fool</h3>
                <select class="custom-select mr-sm-2" id="q7">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 8</h2>
                <h3>You're at your best when when the going gets rough.</h3>
                <select class="custom-select mr-sm-2" id="q8">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 9</h2>
                <h3>You've been put to the test, but it's never enough.</h3>
                <select class="custom-select mr-sm-2" id="q9">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h2>Question 10</h2>
                <h3>You got the Touch!</h3>
                <select class="custom-select mr-sm-2" id="q10">
                    <option selected>Choose...</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3 (meh)</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree</option>
                </select>
                <button type="submit" class="btn btn-primary submit" data-toggle="modal" data-target="#exampleModal">Submit</button>
            </div>
        </div>
    </form>

    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  ...
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
</body>

<script type="text/javascript">


$('.submit').on('click', function (event){
    event.preventDefault();

    function validateForm(){
        var valid = true;
        $('.form-control').each(function(){
            if($(this).val() === ''){
                valid = false
            };
        });
        $('.custom-select').each(function(){
            if($(this).val() === ''){
                valid = false
            };
        });
        return valid
    };

    if(validateForm()){
        var newFriend = {
            name: $('#name').val(),
            image: $('#image-url').val().trim(),
            scores: [
                parseInt($('#q1').val()),
                parseInt($('#q2').val()),
                parseInt($('#q3').val()),
                parseInt($('#q4').val()),
                parseInt($('#q5').val()),
                parseInt($('#q6').val()),
                parseInt($('#q7').val()),
                parseInt($('#q8').val()),
                parseInt($('#q9').val()),
                parseInt($('#q10').val()),
            ]
        };
        $.post('/api/friends', newFriend, function (data){

                var friendImg = $('<img>').attr('src', data.image);
                friendImg.addClass('img-fluid');
                $('.modal-body').html(friendImg);
                $('.modal-title').html(data.name);
        });
    }
    else{
        $('.modal-body').html('Please fill out the form completely, you filthy animal');
        $('.modal-title').html('');
    }
});


</script>

</html>